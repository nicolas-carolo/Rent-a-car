{% extends 'base.html' %}

{% block other_styles %}
    <link rel="stylesheet" href="/static/css/car_details_style.css" type="text/css" />
{% endblock %}

{% block javascript_code %}
    <script src="/static/script/car_details.js" type="text/javascript"></script>
{% endblock %}

{% block car_details %}
    <div class="car-image">
        <img src="{{ car.photo_link }}" alt="{{ car.brand }} {{ car.model }}" width="640" height="480">
    </div>
    <div class="car-details" id="div-details">
        <table>
            <tr>
                <th>Brand:</th>
                <td>{{ car.brand }}</td>
            </tr>
            <tr>
                <th>Model:</th>
                <td>{{ car.model }}</td>
            </tr>
            <tr>
                <th>Year:</th>
                <td>{{ car.car_year }}</td>
            </tr>
            <tr>
                <th>Number of seats:</th>
                <td>{{ car.n_seats }}</td>
            </tr>
            <tr>
                <th>Type of car:</th>
                <td>{{ car.car_type }}</td>
            </tr>
            <tr>
                <th>Engine:</th>
                <td>{{ car.engine }}</td>
            </tr>
            <tr>
                <th>Fuel:</th>
                <td>{{ car.fuel }}</td>
            </tr>
            <tr>
                <th>Power:</th>
                <td>{{ car.power }} cv</td>
            </tr>
            <tr>
                <th>Transmission:</th>
                <td>{{ car.transmission }}</td>
            </tr>
            <tr>
                <th>Driver's minimum age:</th>
                <td>{{ car.min_age }} years old</td>
            </tr>
            <tr>
                <th>Price:</th>
                <td>€ {{ car.price }} per day</td>
            </tr>
        </table>
        <input type="button" id="hire-button" value="Hire" onclick="show_div_hire()">
        <div class="hire" id="div-hire">
            <hr width="100%" height="1">
            <p class="hire">Select the interval of days you will hire the car:</p><br>
            <form method="post" action="/check_availability">
                <input type="hidden" id="car-id" name="car-id" value="{{ car.id }}">
                <label for date-from>From:</label>
                <input type="date" id="date-from" name="date-from">
                <label for date-to>To:</label>
                <input type="date" id="date-to" name="date-to">
                <input type="submit" id="check-availability-button" value="Check availability"><br>
            </form>
        </div>
        {% if error %}
            <script type="text/javascript">show_date_error("{{ error }}")</script>
        {% endif %}
        <div class="confirm-hire" id="div-confirm-hire">
            <hr width="100%" height="1">
            {% if is_available %}
                <p class="confirm-hire" id="msg-confirm-hire">Total price: € {{ total_price }}</p>
            {% else %}
                <p class="confirm-hire" id="msg-confirm-hire">We are sorry, but this car will not be available in the selected period</p>
            {% endif %}
            {% if show_confirm_div %}
                <script type="text/javascript">show_div_confirm_hire("{{ is_available }}", "{{ date_from }}", "{{ date_to }}")</script>
            {% endif %}
        </div>
    </div>
{% endblock %}